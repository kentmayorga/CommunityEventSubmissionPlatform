DROP TABLE IF EXISTS users;

CREATE TABLE users (
    id             INT NOT NULL AUTO_INCREMENT,
    username       VARCHAR(100) NOT NULL,
    password       VARCHAR(255) NOT NULL,
    email          VARCHAR(100) NOT NULL,
    firstname      VARCHAR(100) NOT NULL,
    lastname       VARCHAR(100) NOT NULL,
    address        TEXT NULL,             -- for community address
    role           VARCHAR(20) NOT NULL,  -- admin | user
    created_date   DATETIME NOT NULL,     -- when the user is created
    modified_date  DATETIME NULL,         -- when the user is updated
    deleted_date   DATETIME NULL,         -- when the user is deleted
    PRIMARY KEY (id)
);

 insert into `users` (`username`, `password`, `email`, `firstname`, `lastname`, `address`, `role`, `created_date`)
 values 
 ('admin', md5('admin'), 'admin@gmail.com', 'System', 'Administrator', '', 'admin', now()),
 ('user1', md5('user1'), 'user1@gmail.com', 'System', 'User1', 'Cebu City', 'user', now()),
 ('user2', md5('user2'), 'user2@gmail.com', 'System', 'User2', 'Mandaue City', 'user', now());


-------------

DROP TABLE IF EXISTS `event_submission`;
CREATE TABLE `event_submission` (
  event_id         int NOT NULL AUTO_INCREMENT,
  title            varchar(255) NOT NULL,
  description      text NOT NULL,
  category         varchar(100) NOT NULL,
  event_datetime   datetime NOT NULL,
  location         varchar(255) NOT NULL,
  image_url        varchar(255) NULL,
  status           varchar(20) NOT NULL DEFAULT 'pending',  -- pending | approved | rejected
  submitter_id     int NOT NULL,                             -- FK to users.id
  created_date     datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  modified_date    datetime NULL,
  PRIMARY KEY (event_id),
  FOREIGN KEY (submitter_id) REFERENCES users(id)
);
